function o(s,e,t,a,r,d,u,v){var l=typeof s=="function"?s.options:s;e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),a&&(l.functional=!0),d&&(l._scopeId="data-v-"+d);var i;if(u?(i=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__<"u"&&(n=__VUE_SSR_CONTEXT__),r&&r.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(u)},l._ssrRegister=i):r&&(i=v?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),i)if(l.functional){l._injectStyles=i;var h=l.render;l.render=function(m,f){return i.call(f),h(m,f)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,i):[i]}return{exports:s,options:l}}const g={mixins:[Fieldtype],computed:{fields(){return _.chain(this.meta.fields).map(s=>({handle:s.handle,...s.field})).values().value()}},methods:{updateKey(s,e){let t=this.value;Vue.set(t,s,e),this.update(t)}}};var C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"publish-fields"},e._l(e.fields,function(a){return t("publish-field",{key:a.handle,staticClass:"form-group",attrs:{config:a,value:e.value[a.handle],meta:e.meta.meta[a.handle],"read-only":!a.localizable},on:{"meta-updated":function(r){return e.metaUpdated(a.handle,r)},focus:function(r){return e.$emit("focus")},blur:function(r){return e.$emit("blur")},input:function(r){return e.updateKey(a.handle,r)}}})}),1)},x=[],y=o(g,C,x,!1,null,null,null,null);const b=y.exports;const $={mixins:[Fieldtype],data(){return{autoBindChangeWatcher:!1,changeWatcherWatchDeep:!1,allowedFieldtypes:[]}},computed:{source(){return this.value.source},sourceField(){return this.value.source==="field"?this.value.value:null},componentName(){return this.config.field.type.replace(".","-")+"-fieldtype"},sourceTypeSelectOptions(){let s=[];return this.config.field!==!1&&s.push({label:__("seo-pro::messages.custom"),value:"custom"}),this.config.from_field!==!1&&s.unshift({label:__("seo-pro::messages.from_field"),value:"field"}),this.config.inherit!==!1&&s.unshift({label:__("seo-pro::messages.inherit"),value:"inherit"}),this.config.disableable&&s.push({label:__("seo-pro::messages.disable"),value:"disable"}),s},fieldConfig(){return Object.assign(this.config.field,{placeholder:this.config.placeholder})},placeholder(){return this.config.placeholder}},mounted(){let s=this.config.allowed_fieldtypes||["text","textarea","markdown","redactor"];this.allowedFieldtypes=s.concat(this.config.merge_allowed_fieldtypes||[])},methods:{sourceDropdownChanged(s){this.value.source=s,s!=="field"&&(this.value.value=this.meta.defaultValue,this.meta.fieldMeta=this.meta.defaultFieldMeta)},sourceFieldChanged(s){this.value.value=s},customValueChanged(s){let e=this.value;e.value=s,this.update(e)}}};var w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex"},[t("div",{staticClass:"source-type-select pr-4"},[t("v-select",{attrs:{options:e.sourceTypeSelectOptions,reduce:a=>a.value,disabled:!e.config.localizable,clearable:!1,value:e.source},on:{input:e.sourceDropdownChanged}})],1),t("div",{staticClass:"flex-1"},[e.source==="inherit"?t("div",{staticClass:"text-sm text-grey inherit-placeholder mt-1"},[e.placeholder!==!1?[e._v(" "+e._s(e.placeholder)+" ")]:e._e()],2):e.source==="field"?t("div",{staticClass:"source-field-select"},[t("text-input",{attrs:{value:e.sourceField,disabled:!e.config.localizable},on:{input:e.sourceFieldChanged}})],1):e.source==="custom"?t(e.componentName,{tag:"component",attrs:{name:e.name,config:e.fieldConfig,value:e.value.value,meta:e.meta.fieldMeta,"read-only":!e.config.localizable,handle:"source_value"},on:{input:e.customValueChanged}}):e._e()],1)])},F=[],S=o($,w,F,!1,null,null,null,null);const R=S.exports,T={props:["status"]};var k=function(){var e=this,t=e._self._c;return t("div",[e.status==="pending"?t("span",{staticClass:"icon icon-circular-graph animation-spin"}):t("span",{staticClass:"little-dot",class:{"bg-green-600":e.status==="pass","bg-red-500":e.status==="fail","bg-yellow-dark":e.status==="warning"}})])},D=[],V=o(T,k,D,!1,null,null,null,null);const c=V.exports,P={props:["item"],components:{StatusIcon:c}};var z=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"report-details","click-to-close":!0},on:{closed:function(a){return e.$emit("closed")}}},[t("div",{staticClass:"p-0"},[t("h1",{staticClass:"p-4 bg-gray-200 border-b text-lg"},[e._v(" "+e._s(e.__("seo-pro::messages.page_details"))+" ")]),t("div",{staticClass:"modal-body"},e._l(e.item.results,function(a){return t("div",{staticClass:"flex px-4 leading-normal pb-2",class:{"bg-red-100":a.status!=="pass"}},[t("status-icon",{staticClass:"mr-3 mt-2",attrs:{status:a.status}}),t("div",{staticClass:"flex-1 mt-2 prose text-gray-700"},[t("div",{staticClass:"text-gray-900",domProps:{innerHTML:e._s(a.description)}}),a.comment?t("div",{staticClass:"text-xs",class:{"text-red-800":a.status!=="pass"},domProps:{innerHTML:e._s(a.comment)}}):e._e()])],1)}),0),t("footer",{staticClass:"px-5 py-3 bg-gray-200 rounded-b-lg border-t flex items-center font-mono text-xs"},[e._v(" "+e._s(e.item.url)+" ")])])])},M=[],N=o(P,z,M,!1,null,null,null,null);const O=N.exports,W={props:["date"],data(){return{text:null}},mounted(){this.update()},methods:{update(){this.text=moment(this.date*1e3).fromNow(),setTimeout(()=>this.update(),6e4)}}};var U=function(){var e=this,t=e._self._c;return t("span",[e._v(e._s(e.text))])},E=[],H=o(W,U,E,!1,null,null,null,null);const K=H.exports,L={components:{ReportDetails:O,RelativeDate:K,StatusIcon:c},props:["id"],data(){return{loading:!1,report:null,selected:null}},mounted(){this.load()},methods:{load(){this.loading=!0,this.report=null,Statamic.$request.get(cp_url(`seo-pro/reports/${this.id}`)).then(s=>{if(s.data.status==="pending"||s.data.status==="generating"){setTimeout(()=>this.load(),1e3);return}this.report=s.data,this.loading=!1})}}};var X=function(){var e=this,t=e._self._c;return t("div",[t("header",{staticClass:"flex items-center mb-6"},[t("h1",{staticClass:"flex-1"},[e._v(e._s(e.__("seo-pro::messages.seo_report")))]),e.loading?e._e():t("a",{staticClass:"btn-primary",attrs:{href:e.cp_url("seo-pro/reports/create")}},[e._v(e._s(e.__("seo-pro::messages.generate_report")))])]),e.loading?t("div",{staticClass:"card loading"},[t("span",{staticClass:"icon icon-circular-graph animation-spin"}),e._v(" "+e._s(e.__("seo-pro::messages.report_is_being_generated"))+" ")]):!e.loading&&e.report?t("div",[t("div",{staticClass:"flex flex-wrap -mx-4"},[t("div",{staticClass:"w-1/3 px-4"},[t("div",{staticClass:"card py-2"},[t("h2",{staticClass:"text-sm text-gray-700"},[e._v(e._s(e.__("seo-pro::messages.generated")))]),t("div",{staticClass:"text-lg"},[t("relative-date",{attrs:{date:e.report.date}})],1)])]),t("div",{staticClass:"w-1/3 px-4"},[t("div",{staticClass:"card py-2"},[t("h2",{staticClass:"text-sm text-gray-700"},[e._v(e._s(e.__("Pages Crawled")))]),t("div",{staticClass:"text-lg"},[e._v(e._s(e.report.pages.length))])])]),t("div",{staticClass:"w-1/3 px-4"},[t("div",{staticClass:"card py-2"},[t("h2",{staticClass:"text-sm text-gray-700"},[e._v(e._s(e.__("Site Score")))]),t("div",{staticClass:"text-lg flex items-center"},[t("div",{staticClass:"bg-gray-200 h-3 w-full rounded flex mr-2"},[t("div",{staticClass:"h-3 rounded-l",class:{"bg-red-500":e.report.score<70,"bg-yellow-dark":e.report.score<90,"bg-green-500":e.report.score>=90},style:`width: ${e.report.score}%`})]),t("span",[e._v(e._s(e.report.score)+"%")])])])])]),t("div",{staticClass:"card p-0 mt-6"},[t("table",{staticClass:"data-table"},[t("tbody",e._l(e.report.results,function(a){return t("tr",[t("td",{staticClass:"w-8 text-center"},[t("status-icon",{attrs:{status:a.status}})],1),t("td",{staticClass:"pl-0"},[e._v(e._s(a.description))]),t("td",{staticClass:"text-grey text-right"},[e._v(e._s(a.comment))])])}),0)])]),t("div",{staticClass:"card p-0 mt-6"},[t("table",{staticClass:"data-table"},[t("tbody",e._l(e.report.pages,function(a){return t("tr",[t("td",{staticClass:"w-8 text-center"},[t("status-icon",{attrs:{status:a.status}})],1),t("td",{staticClass:"pl-0"},[t("a",{attrs:{href:""},on:{click:function(r){r.preventDefault(),e.selected=a.id}}},[e._v(e._s(a.url))]),e.selected===a.id?t("report-details",{attrs:{item:a},on:{closed:function(r){e.selected=null}}}):e._e()],1),t("td",{staticClass:"text-right text-xs pr-0 whitespace-no-wrap"},[t("a",{staticClass:"text-gray-700 mr-4 hover:text-grey-80",domProps:{textContent:e._s(e.__("Details"))},on:{click:function(r){r.preventDefault(),e.selected=a.id}}}),a.edit_url?t("a",{staticClass:"mr-4 text-gray-700 hover:text-gray-800",attrs:{target:"_blank",href:a.edit_url},domProps:{textContent:e._s(e.__("Edit"))}}):e._e()])])}),0)])])]):e._e()])},q=[],B=o(L,X,q,!1,null,null,null,null);const I=B.exports;Statamic.$components.register("seo_pro-fieldtype",b);Statamic.$components.register("seo_pro_source-fieldtype",R);Statamic.$components.register("seo-pro-status-icon",c);Statamic.$components.register("seo-pro-report",I);
